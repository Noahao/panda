<template>  <PClayoutEn>    <BannerPc />    <img class="img" src="https://file.daqsoft.com/uploadfile/server/geekui/panda/H5/en/bodybg1.jpg" alt="" />    <div class="content">      <div class="content-box">        <TabListPc v-if="$route.query.tab !== 'lxwm'" />        <div class="title">{{ item.title }}</div>        <div class="time" v-show="['NewsCenter'].includes($route.query.channelCode) || ['Activities'].includes($route.query.tab)">          {{ item.publishTime }}        </div>        <div class="video" v-if="item.contentType === 'VIDEO'">          <video controls :src="item.videoInfo.url"></video>        </div>        <div class="text" v-html="item.content"></div>        <!-- 附件下载 -->        <div class="enclosure" v-if="item.annex && item.annex.length">          <ul>            <li @click="download(data)" v-for="data in item.annex" :key="data.id">              附件：{{ getEnclosure(data) }}            </li>          </ul>        </div>        <AudioBox width="12.6rem" :list="item.audioInfo1" v-show="$route.query.tab === 'Music'" />        <!-- 暂无数据 -->        <!-- <img          v-if="!isSkeleton &&!item.title"          class="no-data"          src="https://file.daqsoft.com/uploadfile/server/geekui/padna/h5/en/ea214dcc-f5ee-4288-932d-5fefc39f7f3f.gif"          alt=""        /> -->      </div>    </div>  </PClayoutEn></template><script>import { getDetail, getSimplifyList } from '@/service/apiList/common'import TabListPc from '@/views/English/components/TabListPc.vue'import BannerPc from '@/views/English/components/BannerPc.vue'import AudioBox from '@/components/AudioBox.vue'export default {  name: 'detailsIndex',  components: {    BannerPc,    TabListPc,    AudioBox,  },  data() {    return {      isShow: ['NewsCenter'],      item: {},      isSkeleton: false,    }  },  computed: {    getEnclosure() {      return (str) => {        try {          return str.split('/')[str.split('/').length - 1]        } catch (error) {          return str        }      }    }  },  watch: {    $route: {      handler(to) {        // 列表过来的        if (to.query.id) {          this.getDetails(to.query.id)          return        }        if(to.query.tab) {          // 详情过来的          this.isSkeleton = true          getSimplifyList({            channelCode: to.query.tab,          }).then((res) => {            if (res.code === 0) {              try {                this.getDetails(res.datas[0].id)              } catch (error) {                this.item = {}                this.isSkeleton = false              }            }          })        }      },      immediate: true,      deep: true,    },  },  methods: {    async getDetails(id) {      this.isSkeleton = true      this.item = {}      const res = await getDetail({ id })      if (res.code === 0) {        this.item = res.data        this.setStr(res.data.content)        document.title = this.item.title      }      this.isSkeleton = false    },    setStr(text) {      let str = text      /* a标签新开窗口跳转 */      if(str) {          str = text.replace(/\<a/gi, '<a target="_blank"') // eslint-disable-line      }      // 英文不缩进      str = str.replaceAll('text-indent: 2em;', '')      // rem / 2      let reg = /(\d+)+(?=rem\b)|(\d+\.)\d+(?=rem\b)/g      let arr = str.match(reg)      if(arr && arr.length) {        for(let i = 0; i < arr.length; i++) {          str = str.replace(arr[i], arr[i] / 2)        }        this.item.content = str      }    },    // 下载    download(url) {      let a = document.createElement('a')      a.setAttribute('href', url)      a.setAttribute('target', '_self')      a.setAttribute('id', 'js_a')      //防止反复添加      if(document.getElementById('js_a')) {        document.body.removeChild(document.getElementById('js_a'))      }      document.body.appendChild(a)      a.click()    }  },}</script><style lang="scss" scoped>.img {  width: 100%;  height: calc(100vh - 1.4rem);  position: sticky;  top: 1.4rem;  left: 0;  z-index: -1;}.title {  font-weight: 700;  color: #060100;  font-size: 0.45rem;}.time {  margin-top: 0.2rem;  font-size: 0.22rem;  color: #666;  line-height: 0.36rem;}.content {  margin-top: calc(-100vh + 1.4rem);  padding-bottom: 0.6rem;  &-box {    min-height: calc(100vh - 1.4rem);    padding: 0.8rem 0.5rem 0.74rem;    margin: 0.6rem auto 0;    width: 16.2rem;    background: rgba(255, 255, 255);  }  .text {    margin-top: 0.3rem;    font-size: 0.18rem;    word-wrap: break-word;    color: #666;    font-family: 'Microsoft YaHei', Arial, Helvetica, sans-serif;  }  .enclosure {    margin-top: 0.2rem;    font-size: 0.32rem;    word-wrap: break-word;    color: #0000FF;  }}.no-data {    width: 6rem;    position: relative;    left: 50%;    transform: translateX(-50%);  }.video {  video {    width: 100%;  }}</style>