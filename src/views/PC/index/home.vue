<template>  <div class="page-index">    <HeaderCom :bgType="bgType" style="position: absolute; top: 0; left: 0;" ref="headerCont" />    <!-- 欢迎页 -->    <Section1 v-if="pageWelcomeShow" @completePage="completeSectionOnePage" />    <Section2 v-if="indexNum == 1" ref="homePage" />    <Section3 v-if="indexNum == 2" />    <Section4 v-if="indexNum == 3" />    <Section5 v-if="indexNum == 4" />    <Section6 v-if="indexNum >= 5" />    <transition name="footer">      <FooterCom class="home-footer" v-show="indexNum == 6" />    </transition>    <div class="nav-wrap" v-if="pageWelcomeShow === false">      <div class="ball-wrap">        <span v-for="(item, index) in 5" :key="index" :class="{active: indexNum < 6 ? indexNum === index + 1 : indexNum === index + 2 }" @click="navClick(index)"></span>      </div>      <div class="shubiao-wrap">        <MyIcon name="jiantou_shang" size="10px" color="#FFFFFF" class="shubiao-up"/>        <MyIcon name="shubiao1" size="40px" color="#FFFFFF" class="shubiao"/>        <MyIcon name="jiantou_xia" size="10px" color="#FFFFFF" class="shubiao-down"/>      </div>    </div>  </div></template><script>import { mapState, mapMutations } from 'vuex'import { TweenMax } from 'gsap'import HeaderCom from '@/components/header/PC/header.vue'import Section1 from '@/views/PC/index/components/Section1.vue'import Section2 from '@/views/PC/index/components/Section2.vue'import Section3 from '@/views/PC/index/components/Section3.vue'import Section4 from '@/views/PC/index/components/Section4.vue'import Section5 from '@/views/PC/index/components/Section5.vue'import Section6 from '@/views/PC/index/components/Section6.vue'import FooterCom from '@/components/header/PC/footer.vue'export default {  name: 'IndexHome',  components: {    HeaderCom,    Section1,    Section2,    Section3,    Section4,    Section5,    Section6,    FooterCom  },  data () {    return {      // 用来记录滚动到那一页了      indexNum: 1,      // 欢迎页相关参数      pageWelcomeShow: true,      welcomePageComplete: false,      // 防止滚轮事件重复触发      timeNow: Date.now(),      // 页面的显示与隐藏      showPageOne: false,      // 头部导航栏的动效      // bgType: false,      headerCont: null,    }  },  created () {    // 创建滚动事件    window.addEventListener('wheel', this.wheelHandle, { passive: false })  },  mounted () {    this.headerCont = this.$refs.headerCont.$el    this.headerCont.style.opacity = 0    this.$nextTick(function () {      this.$refs.homePage ? this.$refs.homePage.titleCont.style.display = 'none' : ''    })    this.defaultGet()  },  computed: {    bgType () {      return this.indexNum > 1    },    ...mapState({      indexNumState: (state) => state.backHome.indexNumState,      backHome: (state) => state.backHome.backHome    })  },  destroyed () {    // 页面销毁后，移除该事件    window.removeEventListener('wheel', this.wheelHandle, { passive: false })  },  methods: {    ...mapMutations({      addIndexNum: 'backHome/addIndexNum',      addBackHome: 'backHome/addBackHome'    }),    // 册栏nav点击    navClick(index) {      this.indexNum = index + 1      this.addIndexNum(this.indexNum)    },    // 欢迎页的整个页面完成    completeSectionOnePage() {      this.pageWelcomeShow = false      this.welcomePageComplete = true      this.addIndexNum(this.indexNum)      this.addBackHome(true)      this.headerComAniHandle()    },    defaultGet() {      // if(JSON.parse(sessionStorage.vuex).home.font) {      if(this.backHome) {        this.indexNum = this.indexNumState      }      if(this.$store.state.home.font || sessionStorage.getItem('font') || sessionStorage.getItem('fontDefault')) {        this.completeSectionOnePage()      } else {        return ''      }    },    headerComAniHandle () {      TweenMax.fromTo(this.headerCont, 0.5,{        top: '-20px',        opacity: 0      }, {        top: 0,        opacity: 1,        onComplete: () => {          if(this.$refs.homePage) {            this.$refs.homePage.titleCont.style.display = 'flex'            this.$refs.homePage.titleComAniHandle()          }        }      })    },    // 鼠标滚轮事件    wheelHandle (e) {      // 等待欢迎页加载完成后执行      if(!this.welcomePageComplete) {        return      }      const evt = e      evt.preventDefault()      // 600 为滑轮滚动的延迟时间      if(Date.now() - this.timeNow > 600) {        if(evt.deltaY > 0) {          this.indexNum >= 6 ? this.indexNum = 6 : this.indexNum++        } else {          this.indexNum <= 1 ? this.indexNum = 1 : this.indexNum--        }        this.timeNow = Date.now()      }      this.addIndexNum(this.indexNum)      this.addBackHome(true)    }  }}</script><style lang="scss" scoped>.page-index {  position: absolute;  top: 0px;  left: 0px;  width: 100%;  height: 100%;  overflow: hidden;  .fold-animate {    position: absolute;    top: 0px;    left: 0px;    width: 100%;    height: 100%;    background-color: #15a98d;    &-1 {      background-color: #fbb03f;    }  }  .nav-wrap {    position: fixed;    right: 30px;    top: 50%;    transform: translateY(-50%);    z-index: 99;    .ball-wrap {      display: flex;      flex-direction: column;      align-items: center;      span {        display: block;        width: 12px;        height: 12px;        background: #ffffff;        border-radius: 50%;        margin: 10px 0;        box-shadow: 0 0 10px 0 rgba(0,0,0, 0.2);        cursor: pointer;      }      .active {        width: 20px;        height: 20px;        background: transparent;        border: 3px solid #ffffff;        box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.2);      }    }    .shubiao-wrap {      display: flex;      flex-direction: column;      align-items: center;      margin-top: 10px;      .shubiao-up {        animation: bounce-up 2s linear infinite;      }      .shubiao-down {        animation: bounce-down 2s linear infinite;      }    }    @keyframes bounce-up {      0% {        transform: translateY(0);        opacity: 1;      }      100% {        transform: translateY(-8px);        opacity: 0;      }    }    @keyframes bounce-down {      0% {        transform: translateY(0);        opacity: 1;      }      100% {        transform: translateY(8px);        opacity: 0;      }    }  }}// 首页的定位.home-footer {  position: absolute!important;  bottom: 0;  left: 0;}.footer-enter, .footer-leave-to {  transform: translateY(480px);}.footer-enter-to, .footer-leave {  transform: translateY(0px);}.footer-enter-active, .footer-leave-active {  transition: all 0.3s linear;}</style>