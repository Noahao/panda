<template>  <div class="section3">    <div class="left">      <div class="top">        <div class="main" ref="mainTrends">          <div class="title wow fadeInDownBig">            <p>基地动态</p>            <div class="icon icon-left" @click="$router.push('/pc/baseDynamic/list?channelCode=jddt1')">              <span>                更多                <MyIcon :name="'shuangjiantou'" size="10px"/>              </span>              <img src="https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/left-top.png" alt="" />            </div>          </div>          <div class="main-box">            <div class="swiper-wrap">              <swiper class="my-swiper" :options="leftSwiperOption" ref="mySwiper" v-if="leftTopList.length">                <swiper-slide v-for="(item, index) in leftTopList.slice(0, 4)" :key="index">                  <div @click="PCJumpDetails(item, 'jddt')" class="swiper-top-wrap">                    <div class="img">                      <img :src="item.imageUrls && item.imageUrls[0].url" alt="" />                    </div>                    <div class="text">                      <p class="swiper-title">{{ item.title }}</p>                    </div>                  </div>                </swiper-slide>                <template v-slot:pagination>                  <div class="swiper-pagination"></div>                </template>              </swiper>            </div>            <div class="top-text">              <div @click="PCJumpDetails(leftTopList[0], 'jddt')" class="top-text-title-wrap">                <p class="top-text-title" v-if="leftTopList[0]">{{ leftTopList[0].title }}</p>                <p class="top-text-desc" v-if="leftTopList[0]">{{ getDesc(leftTopList[0].summary) }}</p>                <p class="line"></p>              </div>              <div class="top-text-nav">                <p v-for="(item, index) in leftTopList.slice(1, 6)" :key="index" @click="PCJumpDetails(item, 'jddt')">                  {{ item.title }}                </p>              </div>            </div>          </div>        </div>      </div>      <div class="bottom">        <div class="main" ref="mainNotice">          <div class="title">            <p>单位公告</p>            <div class="icon icon-left" @click="$router.push('/pc/baseDynamic/list?channelCode=dwgg')">              <span>                更多                <MyIcon :name="'shuangjiantou'" size="10px"/>              </span>              <img src="https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/left-bottom.png" alt="" />            </div>          </div>          <div class="main-box">            <div class="bottom-text">              <div @click="PCJumpDetails(leftBottomList[0], 'jddt')" class="bottom-text-title-wrap">                <p class="bottom-text-title" v-if="leftBottomList[0]">{{ leftBottomList[0].title }}</p>                <p class="bottom-text-desc" v-if="leftBottomList[0]">{{ getDesc(leftBottomList[0].summary) }}</p>                <p class="line"></p>              </div>              <div class="bottom-text-nav" v-if="leftBottomList.length">                <p v-for="(item, index) in leftBottomList.slice(1, 5)" :key="index" @click="PCJumpDetails(item, 'jddt')">                  {{ item.title }}                </p>              </div>            </div>          </div>        </div>      </div>    </div>    <div class="right">      <div class="top" ref="focusCont">        <div class="main" ref="mainFocus">          <div class="title">            <p>焦点活动</p>            <div class="icon icon-right" @click="$router.push('/pc/baseDynamic/list?channelCode=jdhd')">              <span>                更多                <MyIcon :name="'shuangjiantou'" size="10px"/>              </span>              <img src="https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/right-top.png" alt="" />            </div>          </div>          <div class="main-box">            <swiper class="my-swiper" :options="rightSwiperOption" ref="mySwiper2">              <swiper-slide v-for="(item, index) in rightSwiperList.slice(0, 4)" :key="index" class="right-swiper-list-box">                <div class="img" :style="{ background: `url(${item.imageUrls[0].url}) center top no-repeat`, 'background-size': 'cover' }"  @click="PCJumpDetails(item, 'jddt')"></div>              </swiper-slide>              <template v-slot:pagination>                <div class="swiper-pagination2"></div>              </template>            </swiper>          </div>        </div>      </div>      <div class="bottom" ref="pandaNewsMain">        <div class="main" ref="mainNews">          <div class="title">            <p>熊猫趣闻</p>            <div class="icon icon-right" @click="$router.push('/pc/baseDynamic/list?channelCode=xmqw')">              <span>                更多                <MyIcon :name="'shuangjiantou'" size="10px"/>              </span>              <img src="https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/right-bottom.png" alt="" />            </div>          </div>          <div class="main-box">            <div class="bottom-text-nav">              <p v-for="(item, index) in rightBottomList.slice(0, 5)" :key="index" @click="PCJumpDetails(item, 'jddt')">                <span>{{ item.title }}</span>              </p>            </div>          </div>        </div>      </div>    </div>    <div class="fold-animate" ref="fold"></div>  </div></template><script>import { getNewsList } from '@/service/apiList/common'import { TimelineMax } from 'gsap'export default {  name: 'SectionThree',  props: {    indexChild: {      type: Number,      default: 3,    },  },  inject: ['PCJumpDetails'],  data() {    return {      leftSwiperList: [],      leftTopList: [],      leftBottomList: [],      rightBottomList: [],      rightSwiperList: [],      leftSwiperOption: {        slidesPerView: 'auto',        loop: false,        // 显示分页        pagination: {          el: '.swiper-pagination',          clickable: true,        },        on: {          click: function () {            // console.log(this.realIndex)          },        },      },      rightSwiperOption: {        effect: 'fade',        slidesPerView: 'auto',        loop: false,        // 显示分页        pagination: {          el: '.swiper-pagination2',          clickable: true,        },        on: {          click: function () {            // console.log(this.realIndex)          },        },      },      // 遮罩层的 dom      fold: null,      // 基地动态的dom      mainTrends: null,      // 公告的 dom      mainNotice: null,      // 熊猫要闻的整个 dom      pandaNewsMain: null,      // 熊猫要闻的 dom      mainNews: null,      // 焦点活动      mainFocus: null,      // 焦点活动的整个 dom      focusContMain: null,    }  },  computed: {    getDesc() {      return (desc) => {        let reg = /\s+/g        let trimStr = desc.replace(reg,'')        return trimStr      }    }  },  created() {    this.getDynamicList()    this.getAnnouncementList()    this.getFocusOfList()    this.getInterertingsList()  },  mounted () {    // 对要使用到的动画 dom 进行赋值    // start    this.fold = this.$refs.fold    this.mainTrends = this.$refs.mainTrends    this.mainNotice = this.$refs.mainNotice    this.mainNews = this.$refs.mainNews    this.pandaNewsMain = this.$refs.pandaNewsMain    this.mainFocus = this.$refs.mainFocus    this.focusContMain = this.$refs.focusCont    // end    this.animateInit()  },  methods: {    // 动画执行函数    animateInit() {      const tl = new TimelineMax()      tl.fromTo(this.fold, 1, {        left: '-100%'      }, {        left: '68.75%'      })      tl.fromTo(this.pandaNewsMain, 0.2, {        backgroundImage: '',      }, {        backgroundImage: 'url(https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/bg4.jpg)',      })      tl.fromTo(this.focusContMain, 0.2, {        backgroundImage: '',      }, {        backgroundImage: 'url(https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/bg2.jpg)',      })      tl.fromTo(this.mainFocus, 0.2, {        opacity: 0      }, {        opacity: 1      }, '-=0.2')      tl.to(this.fold, 0.5, {        height: '0%'      })      this.toDownDisplay(tl, this.mainTrends)      this.toDownDisplay(tl, this.mainNotice)      this.toDownDisplay(tl, this.mainNews)    },    /**     * @description: 向下透明到显示的函数     * @param {*} aniObj 当前动画执行的动画对象     * @param {*} el 执行动画的 dom 元素     */    toDownDisplay (aniObj, el) {      aniObj.fromTo(el, 0.5, {        opacity: 0,        top: '45%'      }, {        opacity: 1,        top: '50%'      })    },    // 基地动态    getDynamicList() {      getNewsList({        channelCode: 'jddt1',        pageSize: 10,        currPage: 1,      }).then(res => {        if (res.code === 0) {          this.leftTopList = res.datas        }      })    },    // 单位公告    getAnnouncementList() {      getNewsList({        channelCode: 'dwgg',        pageSize: 5,        currPage: 1,      }).then(res => {        if (res.code === 0) {          this.leftBottomList = res.datas        }      })    },    // 焦点活动    getFocusOfList() {      getNewsList({        channelCode: 'jdhd',      }).then(res => {        if (res.code === 0) {          this.rightSwiperList = res.datas        }      })    },    // 熊猫趣闻    getInterertingsList() {      getNewsList({        channelCode: 'xmqw',        pageSize: 4,        currPage: 1,      }).then(res => {        if (res.code === 0) {          this.rightBottomList = res.datas        }      })    },  },}</script><style lang="scss" scoped>.section3 {  position: relative;  width: 100%;  height: 100%;  margin: 0;  overflow: hidden;  .icon {    cursor: pointer;    display: flex;    align-items: flex-end;    span {      font-weight: 500;      font-size: 16px;      margin-right: 10px;      display: block;    }    img {      width: 72px;    }  }  .icon-left {    span {      color: #333333;      &:hover {        color: #15A98D;      }    }  }  .icon-right {    span {      color: #ffffff;      border-bottom: 1px solid transparent;      &:hover {        border-bottom-color: #ffffff;      }    }  }  .left {    width: 68.75%;    height: 100%;    display: inline-block;    overflow: hidden;    padding-top: 70px;    .title {      font-weight: Bold;      font-size: 30px;      text-align: left;      color: #333333;      margin-bottom: 30px;      display: flex;      align-items: flex-end;      justify-content: space-between;    }    .top {      width: 100%;      height: 56%;      min-height: 500px;      background: url('https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/pic.jpg') no-repeat;      background-size: cover;      position: relative;      .main {        margin: auto;        position: absolute;        left: 50%;        transform: translate(-50%, -50%);        top: 50%;        max-width: 1120px;        min-width: 820px;        width: 80%;        .main-box {          display: flex;        }        .swiper-wrap {          width: 49%;          max-width: 540px;          min-width: 490px;          display: inline-block;          position: relative;          .swiper-container {            height: 100%;          }          .swiper-top-wrap {            cursor: pointer;            height: 100%;            &:hover {              .img {                img {                  transform: scale(1.2);                }              }            }          }          .img {            width: 100%;            overflow: hidden;            height: 100%;            img {              width: 100%;              transition: all .25s;              height: 100%;              object-fit: cover;            }          }          .text {            width: 100%;            position: absolute;            bottom: 0;            left: 0;            height: 60px;            background: rgba(0, 0, 0, 0.3);            .swiper-title {              font-size: 18px;              color: #ffffff;              display: inline-block;              width: 75%;              line-height: 60px;              @include ellipsisLn(1);              padding-left: 8px;            }          }        }        .swiper-pagination {          display: inline-flex;          align-items: center;          width: auto !important;          left: 436px;          ::v-deep .swiper-pagination-bullet {            width: 8px;            height: 8px;            border: 1px solid #ffffff;            background: none;            opacity: 1;            margin: 8px;          }          ::v-deep .swiper-pagination-bullet-active {            width: 12px;            height: 12px;            border: 3px solid #ffffff;          }        }        .top-text {          width: 49%;          max-width: 540px;          min-width: 300px;          display: inline-block;          position: relative;          margin-left: 30px;          .top-text-title-wrap {            cursor: pointer;            &:hover {              .top-text-title {                color: #15A98D;              }            }          }          &-title {            font-size: 24px;            color: #333333;            @include ellipsisLn(2);          }          &-desc {            font-size: 16px;            color: #999999;            margin: 20px 0 25px;            @include ellipsisLn(2);            text-indent: 2em;          }          .line {            width: 100%;            height: 1px;            background: #e8e8e8;          }          &-nav {            font-size: 18px;            color: #666666;            margin-top: 25px;            p {              padding-left: 20px;              position: relative;              margin-top: 32px;              @include ellipsisLn(1);              cursor: pointer;              /*&:not(:first-child) {                  margin-top: 10px;                }*/              &:hover {                color: #15A98D;              }              &::before {                position: absolute;                top: 10px;                left: 4px;                content: '';                width: 6px;                height: 6px;                border: 1px solid #666666;                border-radius: 50%;              }            }          }        }      }    }    .bottom {      width: 100%;      height: 44%;      background: url('https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/bg.jpg') no-repeat;      background-size: cover;      position: relative;      .main {        margin: auto;        position: absolute;        left: 50%;        transform: translate(-50%, -50%);        top: 50%;        max-width: 1120px;        min-width: 820px;        width: 80%;        .bottom-text {          .bottom-text-title-wrap {            cursor: pointer;            &:hover {              .bottom-text-title {                color: #15A98D;              }            }          }          &-title {            font-size: 24px;            color: #333333;            @include ellipsisLn(1);          }          &-desc {            font-size: 16px;            color: #999999;            margin: 25px 0 30px;            @include ellipsisLn(1);            text-indent: 2em;          }          .line {            width: 100%;            height: 1px;            background: #e8e8e8;          }          &-nav {            font-size: 18px;            color: #666666;            margin-top: 25px;            display: flex;            justify-content: space-between;            flex-wrap: wrap;            p {              padding-left: 20px;              position: relative;              width: 45%;              @include ellipsisLn(1);              cursor: pointer;              height: 22px;              &:hover {                color: #15A98D;              }              &:first-child {                margin-bottom: 20px;              }              &::before {                position: absolute;                top: 10px;                left: 4px;                content: '';                width: 6px;                height: 6px;                border: 1px solid #666666;                border-radius: 50%;              }            }          }        }      }    }  }  .right {    width: 31.25%;    height: 100%;    display: inline-block;    padding-top: 70px;    overflow: hidden;    .title {      font-weight: Bold;      font-size: 30px;      text-align: left;      color: #ffffff;      margin-bottom: 30px;      display: flex;      align-items: flex-end;      justify-content: space-between;    }    .top {      width: 100%;      height: 72%;      background-repeat: no-repeat;      background-size: cover;      background-color: #fff;      position: relative;      .main {        margin: auto;        position: absolute;        left: 50%;        transform: translate(-50%);        top: 13%;        max-width: 460px;        min-width: 360px;        width: 80%;        .main-box {          width: 100%;          .right-swiper-list-box {            width: 100%;            height: 265px;            position: relative;            padding: 10px;            background: rgba(255, 255, 255, 0.4);            .img {              width: 100%;              height: 100%;              cursor: pointer;            }          }        }        .swiper-pagination2 {          display: flex;          align-items: center;          justify-content: center;          margin-top: 50px;          ::v-deep .swiper-pagination-bullet {            width: 12px;            height: 12px;            border: 1px solid #ffffff;            background: none;            opacity: 1;            margin: 8px;          }          ::v-deep .swiper-pagination-bullet-active {            width: 20px;            height: 20px;            border: 3px solid #ffffff;          }        }      }    }    .bottom {      width: 100%;      height: 28%;      background-repeat: no-repeat;      background-size: cover;      background-color: #fff;      position: relative;      .main {        margin: auto;        position: absolute;        left: 50%;        transform: translate(-50%, -50%);        top: 50%;        max-width: 460px;        min-width: 360px;        width: 80%;        .bottom-text-nav {          font-size: 18px;          color: #ffffff;          margin-top: 25px;          display: flex;          justify-content: space-between;          flex-wrap: wrap;          p {            padding-left: 20px;            position: relative;            width: 48%;            height: 24px;            cursor: pointer;            span {              width: 138px;              border-bottom: 1px solid transparent;              padding-bottom: 3px;              @include ellipsisLn(1);            }            &:first-child {              margin-bottom: 20px;            }            &:hover {              span {                border-color: #ffffff;              }            }            &::before {              position: absolute;              top: 10px;              left: 4px;              content: '';              width: 6px;              height: 6px;              border: 1px solid #ffffff;              border-radius: 50%;            }          }        }      }    }  }  .fold-animate {    position: absolute;    top: 0px;    left: 0px;    width: 100%;    height: 100%;    background-color: #fbb03f;  }}</style>