<template>  <div class="section5">    <div class="text">      <div class="text1" ref="oneMain">        <span class="left"> 400 </span>        <div class="right">          <p>余篇</p>          <p>国际、国内知名期刊发表论文</p>        </div>      </div>      <div class="text1" ref="twoMain">        <span class="left"> 70 </span>        <div class="right">          <p>余项</p>          <p>国家、省、市科技奖励</p>        </div>      </div>      <div class="text1" ref="threeMain">        <span class="left"> 26 </span>        <div class="right">          <p>项</p>          <p>国家专利</p>        </div>      </div>    </div>    <div class="nav">      <div class="list-box" v-for="(item, index) in list" :key="index"           :style="{ 'background-image': `url(${item.bg})`, 'background-repeat': 'no-repeat', 'background-position': 'bottom', 'background-color': `${item.color}` }"           @mouseenter="itemEnter(index)" @mouseleave="itemLeave" :class="{'list-hover': currentIndex === index}" @click.stop="itemClick(item)">        <div class="icon" >          <img :src="item.icon" alt="" />        </div>        <p class="title">{{ item.title }}</p>        <p class="desc">{{ item.desc }}</p>        <div class="list-child" v-show="currentIndex === index">          <p v-for="(item2, index2) in item.subset" :key="index2" @click.stop="itemClick(item2)">            <span>{{item2.name}}</span>          </p>        </div>      </div>    </div>    <!-- 遮罩层 -->    <div class="fold-animate" ref="fold"></div>    <!-- 云彩 -->    <div class="cloud-cont">      <img src="http://file.daqsoft.com/uploadfile/server/geekui/panda/PC/Section5-cloud.png" class="cloud-icon" />    </div>  </div></template><script>import { TimelineMax } from 'gsap'import { getNewsList, getChannelSubset } from '@/service/apiList/common'export default {  name: 'SectionFive',  inject: ['PCJumpDetails'],  data() {    return {      currentIndex: null,      list: [        {          bg: 'https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/section5-nav-bg1.png',          icon: 'https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/section5-nav-icon1.png',          title: '科研保护',          channelCode: 'kybh',          desc: '为国家生物多样性保护及生态安全提供支撑',          color: '#f8b62d'        },        {          bg: 'https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/section5-nav-bg2.png',          icon: 'https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/section5-nav-icon2.png',          title: '科普教育',          channelCode: 'kpjy',          desc: '丰富的科普教育资源和人才开展保护教育',          color: '#17a98e'        },        {          bg: 'https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/section5-nav-bg3.png',          icon: 'https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/section5-nav-icon3.png',          title: '熊猫文化',          channelCode: 'xmwh',          desc: '关爱熊猫，守护国宝！了解、传播大熊猫文化',          color: '#30a1d4'        },      ],      // 需要用到的操作的 dom      // 遮罩层的 dom      fold: null,      oneMain: null,      twoMain: null,      threeMain: null,      // 添加云彩动画的 class 动画属性      cloudMoveCls: false    }  },  created() {    this.getChannelcrumbs()  },  mounted() {    // 动画使用的相关 dom    // start    this.fold = this.$refs.fold    this.oneMain = this.$refs.oneMain    this.twoMain = this.$refs.twoMain    this.threeMain = this.$refs.threeMain    // end    this.animateInit()  },  methods: {    itemClick (item) {      if (item.url1 && item.url1.includes('?details')) {        const params = this.getQueryString(item.url1)        getNewsList({ channelCode: params.details }).then((res) => {          try {            this.PCJumpDetails(res.datas[0], params.channelCode)          } catch (error) {            this.$message({              message: '敬请期待！',              type: 'warning'            })          }        })        return ''      } else if(item.url1 && !item.url1.includes('?details')) {        this.$router.push(item.url1)      } else {        this.$message({          message: '敬请期待！',          type: 'warning'        })      }    },    getQueryString(url) {      let ItemArr = []      let ItemObj = {}      url        .substring(url.lastIndexOf('?') + 1, url.length)        .split('&')        .map((item) => {          ItemArr.push(item.split('='))        })      ItemArr.map((item) => {        ItemObj[item[0]] = item[1]      })      return ItemObj    },    getChannelcrumbs() {      this.list.map(item => {        getChannelSubset({          channelCode: item.channelCode,        }).then((res) => {          item.subset = res.data.subset          item.url1 = res.data.url1        })      })    },    itemEnter(index) {      this.currentIndex = index    },    itemLeave() {      this.currentIndex = null    },    // 动画初始化    animateInit() {      const tl = new TimelineMax()      tl.fromTo(this.fold, 1, {        left: '-100%'      }, {        left: '100%'      })      this.toRightDisplay(tl, this.oneMain)      this.toRightDisplay(tl, this.twoMain)      this.toRightDisplay(tl, this.threeMain)    },    // 从左向右显示    toRightDisplay(aniObj, el) {      aniObj.fromTo(        el,        1,        {          transform: 'translateX(-40px)',          opacity: 0,        },        {          transform: 'translateX(0px)',          opacity: 1,        },        '-=0.3'      )    },  },}</script><style lang="scss" scoped>.section5 {  width: 100%;  height: 100%;  margin: 0;  overflow: hidden;  padding-top: 70px;  background: url('https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/Section5-bg.png') no-repeat;  background-size: cover;  position: relative;  z-index: 0;  .text {    position: relative;    width: 100%;    padding: 0 240px 0;    z-index: 2;    .text1 {      display: flex;      margin-bottom: 85px;      .left {        color: #ffffff;        font-size: 72px;        padding-bottom: 20px;        border-bottom: 4px solid #ffffff;      }      .right {        color: #fff9f4;        font-size: 20px;        margin-left: 9px;        p {          margin-top: 8px;        }      }    }  }  .nav {    position: absolute;    width: 100%;    display: flex;    justify-content: center;    align-items: flex-end;    bottom: 10%;    z-index: 3;    .list-box {      width: 30%;      max-width: 460px;      min-width: 400px;      height: 200px;      text-align: center;      padding-top: 25px;      color: #ffffff;      transition: all 0.25s;      cursor: pointer;      &:nth-child(2) {        margin: 0 5%;      }      .title {        font-size: 24px;        margin: 18px 0 10px;      }      .desc {        font-size: 16px;      }      .icon {        img {          width: 72px;        }      }    }    .list-hover {      height: 680px;      text-align: left;      padding: 70px 40px 0 60px;      position: relative;      .title {        font-weight: bold;        font-size: 36px;      }      .desc {        margin: 19px 0 51px;      }      .icon {        position: absolute;        right: 50px;        bottom: 230px;        img {          width: 72px;        }      }      .list-child {        font-size: 16px;        padding-right: 100px;        p {          margin-bottom: 15px;          position: relative;          padding-left: 10px;          cursor: pointer;          span {            padding-bottom: 5px;            display: inline-block;            border-bottom: 1px solid transparent;          }          &:hover {            span {              border-bottom: 1px solid #ffffff;            }          }          &::before {            content: '';            width: 5px;            height: 5px;            border-radius: 50%;            background: #ffffff;            position: absolute;            left: -1px;            top: 9px;          }        }      }    }  }  .fold-animate {    position: absolute;    top: 0px;    left: 0px;    width: 100%;    height: 100%;    background-color: #15a98d;    z-index: 6;  }  .cloud-cont {    position: absolute;    left: 220px;    top: 0px;    z-index: 0;    .cloud-icon {      height: 430px;      width: auto;      animation: cloudAni 16s linear infinite;    }  }}@media screen and (min-width: 1920px) {  .text {    margin: 226px 0 156px;  }}@media screen and (max-width: 1920px) {  .text {    margin: 100px 0;    .text1 {      margin-bottom: 60px !important;    }  }}@keyframes cloudAni {  0% {    opacity: 0;    transform: translateX(-220px);  }  10% {    opacity: 1;    transform: translateX(0px);  }  100% {    transform: translateX(280%);  }}</style>