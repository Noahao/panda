<template>  <H5Layout>    <H5Banner channelCode="djgz" />    <div class="construction">      <div class="title" @click="$router.push('/h5/partyWork/list')">党的建设</div>      <div class="tab">        <div :class="tabItem.channelCode === item.channelCode ? 'active' : ''" v-for="item in tab" :key="item.id" @click="tabClick(item)">          {{ item.name }}        </div>      </div>      <div class="list">        <div class="item" @click="jump(item)" v-for="item in construction" :key="item.id">          <p class="title">{{ item.title }}</p>          <p class="text">{{ item.summary }}</p>        </div>      </div>    </div>    <template v-if="construction.length">      <div class="paging" v-show="params.currPage < totalPage && !isSkeleton">        <div @click="page(1)">点击加载</div>      </div>      <div class="paging" v-show="params.currPage === totalPage && !isSkeleton">        <!-- <div>没有更多数据啦</div> -->      </div>    </template>    <!-- 暂无数据 -->    <TextSkeleton v-show="isSkeleton && params.currPage === 1" :num="10" />    <NoData v-if="!isSkeleton && construction.length === 0" />  </H5Layout></template><script>import { getChannelSubset, getNewsList } from '@/service/apiList/common'import NoData from '@/components/NoData.vue'import TextSkeleton from '@/components/h5Skeleton/TextSkeleton.vue'export default {  name: 'PartyWorkList',  components: {    NoData,    TextSkeleton,  },  created() {    this.getChannelSubset()  },  data() {    return {      tab: [],      tabItem: {},      construction: [],      isSkeleton: false,      totalPage: 0,      params: {        channelCode: '',        pageSize: 6,        currPage: 1,      },    }  },  methods: {    // tab    async getChannelSubset() {      const res = await getChannelSubset({        channelCode: 'ddjs',      })      if (res.code === 0) {        this.tab = res.data.subset        this.tabItem = this.tab[0]        this.params.channelCode = this.tab[0].channelCode        this.getList(this.params)      }    },    // tab切换    tabClick(item) {      this.tabItem = item      this.params.channelCode = item.channelCode      this.params.currPage = 1      this.construction = []      this.getList(this.params)    },    // 党的建设    async getList(params) {      this.isSkeleton = true      const res = await getNewsList(params)      if (res.code === 0) {        this.totalPage = res.page.totalPage        if (this.params.currPage === 1) {          this.construction = res.datas        } else {          this.construction.push(...res.datas)        }      }      this.isSkeleton = false    },    page(num) {      this.params.currPage += num      this.getList(this.params)    },    jump(item) {      this.$router.push({        path: '/h5/details',        query: {          id: item.id,          channelCode: 'djgz',          tab: 'ddjs',        },      })    },  },}</script><style lang="scss" scoped>.construction {  width: 7.5rem;  background-size: 100%;  > .title {    padding: 0.79rem 0 0.4rem;    font-weight: Bold;    font-size: 0.46rem;    color: #333333;    line-height: 1;    text-align: center;  }  > .tab {    display: flex;    justify-content: center;    .active {      background: #fbb03f;      border: 0.01rem solid #fbb03f;      color: #ffffff;    }    > div {      width: 2rem;      height: 0.6rem;      background: rgba(255, 255, 255, 1);      line-height: 0.6rem;      text-align: center;      margin-left: 0.3rem;      color: #333333;      font-size: 0.24rem;      border: 0.01rem solid #aaaaaa;      &:first-child {        margin: 0;      }    }  }  > .list {    padding: 0.5rem 0.3rem 0;    > .item {      padding: 0.35rem 0.3rem;      width: 6.9rem;      max-height: 1.8rem;      background: rgb(245, 245, 245);      margin-bottom: 0.3rem;      .title {        line-height: 1;        font-weight: Bold;        font-size: 0.26rem;        color: #333333;        @include ellipsis();      }      .text {        text-indent: 0.48rem;        margin-top: 0.2rem;        font-size: 0.24rem;        line-height: 0.36rem;        color: #666666;        @include ellipsisLn(2);      }    }  }}.paging {  margin: auto;  padding: 0.4rem 0;  display: flex;  width: 4rem;  color: #666;  justify-content: space-around;  div {    font-weight: 500;    font-size: 0.24rem;    padding: 0.14rem 0.4rem;    line-height: 1;    border-radius: 0.26rem;    border: 0.01rem solid #d8d8d8;  }}</style>