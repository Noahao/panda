<template>  <H5Layout>    <H5Banner channelCode="kpjy" />    <div class="construction">      <div class="title">科普资料库</div>      <div class="tab">        <div :class="tabItem.channelCode === item.channelCode ? 'active' : ''" v-for="item in tab" :key="item.id" @click="tabClick(item)" v-show="item.name !== '大熊猫科普知识'">          {{ item.name }}        </div>      </div>      <!-- 学习 -->      <div v-if="['zs'].includes(tabItem.channelCode)" class="list">        <div class="item" @click="jumpDetails(item)" v-for="item in construction" :key="item.id">          <p class="title">{{ item.title }}</p>          <p class="text" v-if="item.summary">{{ item.summary }}</p>        </div>        <div class="item" @click="jump">          <p class="title">大熊猫科普知识</p>        </div>      </div>      <!-- 资料 -->      <div class="the-booth" v-if="['zl'].includes(tabItem.channelCode)">        <div class="box">          <div class="box-list" @click="jumpDetails(item)" v-for="(item, index) in construction" :key="item.id">            <div class="item">              <img :src="item.cover || $Placeholder" alt="" />              <div>{{ item.title }}</div>            </div>            <img v-if="(index + 1) % 2 !== 0" class="img" src="https://file.daqsoft.com/uploadfile/server/geekui/panda/H5/展台.png" alt="" />          </div>        </div>      </div>      <!-- 视频 -->      <div class="video-list" v-if="['sp'].includes(tabItem.channelCode)">        <div class="item" v-for="item in construction" :key="item.id" @click="jumpDetails(item)">          <img :src="item.contentType === 'VIDEO' ? item.video.imgUrl : item.cover || $Placeholder" alt="" />          <div class="bg">{{ item.title }}</div>        </div>      </div>    </div>    <template v-if="construction.length">      <div class="paging" v-show="params.currPage < totalPage && !isSkeleton">        <div @click="page(1)">点击加载</div>      </div>      <div class="paging" v-show="params.currPage === totalPage && !isSkeleton">        <!-- <div>没有更多数据啦</div> -->      </div>    </template>    <!-- 暂无数据 -->    <TextSkeleton v-show="isSkeleton && params.currPage === 1" :num="10" />    <NoData v-if="!isSkeleton && construction.length === 0" />  </H5Layout></template><script>import { getChannelSubset, getSimplifyList } from '@/service/apiList/common'import NoData from '@/components/NoData.vue'import TextSkeleton from '@/components/h5Skeleton/TextSkeleton.vue'export default {  name: 'EducationHome',  components: {    NoData,    TextSkeleton,  },  data() {    return {      tabItem: {},      tab: [],      construction: [],      isSkeleton: false,      totalPage: 0,      params: {        channelCode: '',        pageSize: 6,        currPage: 1,      },    }  },  created() {    this.getChannelSubset()  },  methods: {    // tab切换    tabClick(item) {      this.tabItem = item      this.params.channelCode = item.channelCode      this.params.currPage = 1      this.getList(this.params)    },    async getChannelSubset() {      const res = await getChannelSubset({        channelCode: 'kpzlk',      })      try {        if (res.code === 0) {          this.tab = res.data.subset          this.tabItem = this.tab[0]          this.params.channelCode = this.tab[0].channelCode          this.getList(this.params)        }      } catch (error) {        return ''      }    },    async getList(params) {      this.isSkeleton = true      const res = await getSimplifyList(params)      if (res.code === 0) {        this.totalPage = res.page.totalPage        if (this.params.currPage === 1) {          this.construction = res.datas        } else {          this.construction.push(...res.datas)        }      }      this.isSkeleton = false    },    jump() {      this.$router.push('/h5/generalList?channelCode=dxmkpzs&banner=kpjy')    },    jumpDetails(item) {      this.$router.push({        path: '/h5/details',        query: {          id: item.id,          channelCode:'kpjy',          tab:'kpzlk'        },      })    },    page(num) {      this.params.currPage += num      this.getList(this.params)    },  },}</script><style lang="scss" scoped>.construction {  width: 7.5rem;  background-size: 100%;  > .title {    padding: 0.79rem 0 0.4rem;    font-weight: Bold;    font-size: 0.46rem;    color: #333333;    line-height: 1;    text-align: center;  }  > .tab {    display: flex;    justify-content: center;    .active {      background: #fbb03f;      border: 0.01rem solid #fbb03f;      color: #ffffff;    }    > div {      width: 2rem;      height: 0.6rem;      background: rgba(255, 255, 255, 1);      line-height: 0.6rem;      text-align: center;      margin-left: 0.3rem;      color: #333333;      font-size: 0.24rem;      border: 0.01rem solid #aaaaaa;      &:first-child {        margin: 0;      }    }  }  > .list {    padding: 0.5rem 0.3rem 0;    > .item {      padding: 0.35rem 0.3rem;      width: 6.9rem;      max-height: 1.8rem;      background: rgb(245, 245, 245);      margin-bottom: 0.3rem;      .title {        line-height: 1;        font-weight: Bold;        font-size: 0.26rem;        color: #333333;        @include ellipsis();      }      .text {        margin-top: 0.2rem;        font-size: 0.24rem;        color: 0.24rem;        line-height: 0.36rem;        color: #666666;        @include ellipsisLn(2);      }    }  }  > .the-booth {    margin: 0.5rem 0.28rem 0;    .box {      display: flex;      justify-content: space-around;      flex-wrap: wrap;      .box-list {        margin-bottom: 0.54rem;        width: 50%;      }      .img {        margin-top: -0.9rem;        position: absolute;        left: 50%;        transform: translateX(-50%);        width: 6.72rem;        height: 0.59rem;      }      .item {        position: relative;        text-align: center;        img {          width: 2.09rem;          height: 2.78rem;          margin-bottom: -0.12rem;        }        div {          margin-top: 0.6rem;          font-weight: Bold;          font-size: 0.24rem;          text-align: center;          color: #333333;          @include ellipsis();        }      }    }  }}.video-list {  margin-bottom: 0.2rem;  padding: 0.5rem 0.3rem 0;  > .item {    margin-bottom: 0.5rem;    position: relative;    > img {      position: relative;      width: 100%;      height: 3.88rem;    }    .xmgxc {      opacity: 0;      z-index: 10;      position: absolute;      height: 3.88rem;      overflow: hidden;    }    > .bg {      padding: 0 0.2rem;      position: absolute;      bottom: 0;      width: 6.9rem;      height: 0.79rem;      background: rgba(0, 0, 0, 0.3);      font-weight: 500;      color: #ffffff;      font-size: 0.24rem;      text-align: center;      line-height: 0.79rem;      @include ellipsis(100%);    }  }}.paging {  margin: auto;  padding: 0.4rem 0;  display: flex;  width: 4rem;  color: #666;  justify-content: space-around;  div {    font-weight: 500;    font-size: 0.24rem;    padding: 0.14rem 0.4rem;    line-height: 1;    border-radius: 0.26rem;    border: 0.01rem solid #d8d8d8;  }}</style>