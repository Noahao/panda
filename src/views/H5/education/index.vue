<template>  <H5Layout>    <H5Banner channelCode="kpjy" />    <!-- 科普教育介绍 -->    <div class="introduce">      <div class="title">{{ details.name }}</div>      <p v-if="details.summary" v-html="getText(details.summary)"></p>      <div class="example-3d" v-if="imgList.length">        <swiper ref="swiper" class="swiper" :options="swiperOption">          <swiper-slide v-for="item in imgList" :key="item.id">            <img :src="item.url || $Placeholder" alt="" />          </swiper-slide>        </swiper>      </div>      <MoreAndMore @jump="jumpDetails(item, 'kpjy')" />      <!-- <div class="button " @click="jumpDetails(item, 'kpjy')">查看更多</div> -->    </div>    <!-- 体验 -->    <div class="experience">      <div class="title">“体验”、“互动”、“探索”</div>      <div class="text">了解大熊猫科研、保护，提升科学素养，培养科学精神。</div>      <div class="icon-list">        <div class="item" @click="jump(item)" v-for="item in iconList" :key="item.id">          <div>            <MyIcon :name="item.icon" size="0.4rem" />          </div>          <p>{{ item.name }}</p>        </div>      </div>    </div>    <!-- 科普动态 -->    <Dynamic />  </H5Layout></template><script>import { getChannelDetail, getNewsList } from '@/service/apiList/common'import Dynamic from '@/views/H5/education/components/Dynamic.vue'import MoreAndMore from '@/views/H5/components/MoreAndMore.vue'export default {  name: 'EducationHome',  inject: ['jumpDetails'],  components: {    Dynamic,    MoreAndMore,  },  data() {    let fontSize = 50 * (window.outerWidth / 750)    return {      iconList: [        {          name: '科普场馆',          icon: 'kepuchangguan',          channelCode: 'kpcg',        },        {          name: '活动预约',          icon: 'huodongjieshao',          channelCode: 'hdyy',        },        {          name: '志愿者之家',          icon: 'zhiyuanzhezhijia',          channelCode: 'zyzzj',        },        // {        //   name: '熊猫小游戏',        //   icon: 'xiongmaoxiaoyouxi',        //   channelCode: 'xmxyx',        // },      ],      imgList: [],      details: {},      item: {},      swiperOption: {        effect: 'coverflow',        grabCursor: true,        initialSlide: 2,        centeredSlides: true,        slidesPerView: 'auto',        coverflowEffect: {          rotate: 0,          stretch: fontSize * 3.5,          depth: 220,          modifier: 1,        },      },    }  },  computed: {    getText() {      return (text) => {        if (text && text.length > 33) {          return `<span>${text.substring(0, 28)}</span>          <span>${text.substring(28, text.length)}</span>          `        }        return `<span>${text}</span>          `      }    },  },  created() {    this.getChannelDetail()    this.getNewsList()  },  methods: {    async getChannelDetail() {      const res = await getChannelDetail({ channelCode: 'kpjyjs' })      if (res.code === 0) {        this.details = res.data      }    },    async getNewsList() {      const res = await getNewsList({ channelCode: 'kpjyjs' })      if (res.code === 0) {        try {          this.imgList = res.datas[0].imageUrls          this.item = res.datas[0]        } catch (error) {          this.imgList = []        }      }    },    // 跳转详情    jump(item) {      this.$router.push(`/h5/generalList?channelCode=${item.channelCode}&banner=kpjy`)      // getNewsList({ channelCode: item.channelCode }).then((res) => {      //   if (res.code === 0) {      //     try {      //       this.jumpDetails(res.datas[0], 'kpjy')      //     } catch (error) {      //       return ''      //     }      //   }      // })    },  },}</script><style lang="scss" scoped>.introduce {  padding-bottom: 0.4rem;  .title {    padding: 0.79rem 0 0.49rem;    line-height: 1;    font-weight: Bold;    font-size: 0.46rem;    text-align: center;  }  p {    font-size: 0.24rem !important;    color: #333333 !important;    padding: 0 0.3rem;    line-height: 0.36rem !important;    ::v-deep span {      text-align: center;      display: block;      &:nth-child(2) {        width: 5rem;        @include ellipsis(5rem);        margin: auto;      }    }  }  .button {    font-weight: 500;    font-size: 0.24rem;    padding: 0.18rem 0;    color: #fff;    margin: auto;    line-height: 1;    width: 2rem;    margin-top: 0.4rem;    background: #15a98d;    margin-bottom: 0.79rem;  }}.experience {  background: url('https://file.daqsoft.com/uploadfile/server/geekui/panda/H5/体验banner.png') no-repeat;  background-size: 100%;  width: 7.5rem;  height: 8rem;  text-align: center;  > .title {    font-weight: Bold;    font-size: 0.4rem;    color: #fff;    padding: 1.19rem 0 0.29rem;    line-height: 1;  }  > .text {    font-weight: 500;    font-size: 0.24rem;    color: #ffffff;    line-height: 1;  }  > .icon-list {    padding: 2.38rem 0.3rem 0;    display: flex;    justify-content: space-between;    flex-wrap: wrap;    > .item {      width: 3.25rem;      height: 1.2rem;      background: rgba(255, 255, 255, 1);      display: flex;      align-items: center;      margin-bottom: 0.3rem;      &:last-child {        width: 100%;        display: flex;        justify-content: center;      }      div {        margin-left: 0.4rem;        width: 0.79rem;        height: 0.79rem;        border-radius: 50%;        line-height: 0.79rem;        background: rgba(245, 245, 245, 1);      }      p {        margin-left: 0.19rem;        font-size: 0.24rem;        color: #333333;      }    }  }}.example-3d {  width: 100%;  height: 3rem;  padding: 0 0.3rem;}.swiper {  height: 100%;  width: 100%;  ::v-deep .swiper-wrapper {    display: flex;    align-items: center;  }  .swiper-slide-active {    width: 3.3rem !important;    height: 2.2rem !important;  }  .swiper-slide {    display: flex;    justify-content: center;    align-items: center;    width: 3.3rem;    height: 1.8rem;    position: relative;    &::after {      content: '';      width: 2.37rem;      height: 0;      border-radius: 40%;      position: absolute;      bottom: -0.2rem;      box-shadow: 0px 0px 22px 3px #cfcfcf;    }    img {      height: 100%;    }  }}</style>