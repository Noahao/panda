<template>  <div class="header-wrap">    <div class="logo" @click="$router.push('/')">      <MyIcon name="logo" size="0.6rem"/>      <p>成都ジャイアントパンダ繁殖研究基地</p>    </div>    <div class="nav-wrap">      <div v-for="(item, index) in headList" :key="index" class="list-box">        <span style="color: #333333">          <MyIcon :name="item.icon" size="16px"/>          <span class="name">{{ strIntercept(item.name) }}</span>        </span>        <div class="list-child" v-if="item.subset.length">          <p v-for="(item2, index2) in item.subset" :key="index2" @click.stop="itemClick(item2)">{{ strIntercept(item2.name) }}</p>        </div>      </div>    </div>    <div class="btn-wrap">      <div class="languageSelection">        <div :style="{'color': !bgType ? '#ffffff' : '#333333'}">{{languageName}}</div>        <el-divider direction="vertical" />        <myIcon size="12px" name="sanjiao" class="sign" :color="bgType ? '#333333' : '#ffffff'" />        <div class="list-child">          <p v-for="(options,id) in language" :key="id" @click.stop="selectClass(options)">{{options.name}}</p>        </div>      </div>      <div class="btn" @click="maskClick">        <MyIcon name="caidan" class="caidan" :color="bgType ? '#333333' : '#ffffff'" size="28px"/>      </div>    </div>    <div class="mask" :class="{maskShow: maskShow}">      <img src="https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/mask-logo.png" alt="" class="mask-logo" />      <div class="mask-wrap">        <div v-for="(item, index) in headList" :key="index" class="mask-list-box">          <span>{{ strIntercept(item.name) }}</span>          <div class="mask-list-child" v-if="item.subset.length">            <p v-for="(item2, index2) in item.subset" :key="index2" @click.stop="itemClick(item2)">{{ strIntercept(item2.name) }}</p>          </div>        </div>      </div>      <MyIcon @click="back" name="guanbi-" class="back" color="#666666" size="30px"/>    </div>  </div></template><script>import { mapMutations } from 'vuex'import { routeCodeJump } from '@/util/routerConfig'import { channelcrumbs, getNewsList } from '@/service/apiList/common'export default {  name: 'HeaderJp',  data () {    return {      maskShow: false,      showList: ['axzc1', 'xcdxm', 'gaxmfxax', 'jdxcp', 'lxwm'],      headList: [],      bgType: true,      language: [        {          name: '简体中文',          siteCode: 'site757910',        },        {          name: '繁w中文',          siteCode: 'site757910',        },        {          name: 'English',          siteCode: 'site376781',        },        {          name: '日本Z',          siteCode: 'site199825',        },      ],      languageName: '日本Z'    }  },  computed: {    strIntercept() {      return (name) => {        try {          return name.includes('（') ? name.substring(0, name.indexOf('（')) : name        } catch (error) {          return name        }      }    }  },  mounted () {    this.channelcrumbs()  },  methods: {    ...mapMutations({      addFont: 'home/addFont',    }),    maskClick () {      this.maskShow = true    },    back () {      this.maskShow = false    },    async channelcrumbs() {      const res = await channelcrumbs({ channelCode: 'xmjdgw' })      if (res.code === 0) {        this.$nextTick(() => {          this.headList = res.data.subset          /*this.headList.unshift({            name: 'トップペ`ジ',            url1: '/pc',            subset: []          })*/        })      }    },    getQueryString(url) {      let ItemArr = []      let ItemObj = {}      url        .substring(url.lastIndexOf('?') + 1, url.length)        .split('&')        .map((item) => {          ItemArr.push(item.split('='))        })      ItemArr.map((item) => {        ItemObj[item[0]] = item[1]      })      return ItemObj    },    itemClick(item) {      document.title = this.strIntercept(item.name)      this.maskShow = false      if (item.url1 && item.url1.includes('?details')) {        const params = this.getQueryString(item.url1)        getNewsList({ channelCode: params.details }).then((res) => {          try {            if (res.datas.length === 0) {              this.$message({                message: '敬请期待！',                type: 'warning'              })              return            }            this.PCJumpDetails(res.datas[0], params.channelCode)          } catch (error) {            return ''          }        })        return      }      if (item.url1) {        this.$router.push(item.url1)      }    },    selectClass(e) {      this.languageName = e.name      localStorage.setItem('siteCode', e.siteCode)      if(e.name === '繁w中文') {        this.addFont('繁w中文')        sessionStorage.setItem('fontDefault', true)      }      if(e.name === '简体中文') {        sessionStorage.setItem('fontDefault', true)      }      routeCodeJump(e)      sessionStorage.refresh = 'false'    }  }}</script><style lang="scss" scoped>.header-wrap {  width: 100%;  height: 1.2rem;  padding: 0.3rem 0.4rem;  background: #ffffff;  position: fixed;  z-index: 999;  top: 0;  left: 0;  display: flex;  justify-content: space-between;  align-items: center;  .logo {    display: flex;    align-items: center;    cursor: pointer;    p {      color: #333333;      font-size: .14rem;      margin-left: .12rem;    }  }  .nav-wrap {    display: inline-flex;    justify-content: space-between;    max-width: 16.95rem;    min-width: 8rem;    width: 66%;    font-size: .16rem;    height: 0.17rem;    .list-box {      position: relative;      height: 0.66rem;      .name {        font-size: .16rem;        white-space: nowrap;      }      .list-child {        padding: .25rem .6rem .1rem .25rem;        background: #ffffff;        position: absolute;        top: .45rem;        left: -0.35rem;        transform: rotateY(90deg);        opacity: 0;        visibility: hidden;        transform-origin: 33%;        transition: all 0.25s;        border-radius: .05rem;        box-shadow: 0 0 .4rem 0 rgba(0, 0, 0, 0.1);        cursor: pointer;        p {          color: #333333;          margin-bottom: .15rem;          white-space:nowrap;          font-size: .14rem;          &:hover {            color: #15A98D;          }        }        &::before{          position: absolute;          content: '';          width: 0;          height: 0;          border-left: 0.09rem solid transparent;          border-right: 0.09rem solid transparent;          border-bottom: 0.12rem solid #ffffff;          top: -0.11rem;          left: 0.39rem;        }      }      &:hover {        .list-child {          transform: rotateY(0deg);          opacity: 1;          visibility: visible;        }      }    }  }  .btn-wrap {    display: flex;    align-items: center;    height: 0.29rem;    .languageSelection {      font-size: .16rem;      color: #000;      display: flex;      align-items: center;      margin-right: .4rem;      position: relative;      cursor: pointer;      height: 0.66rem;      &:hover {        .list-child {          transform: rotateY(0deg);          opacity: 1;        }        .sign {          transform: rotateZ(180deg);        }      }      .sign {        transition: all 0.25s;      }      .list-child {        padding: .25rem .6rem .1rem .25rem;        background: #ffffff;        position: absolute;        top: .62rem;        left: -0.2rem;        transform: rotateY(90deg);        opacity: 0;        transform-origin: 33%;        transition: all 0.25s;        border-radius: .05rem;        box-shadow: 0 0 .4rem 0 rgba(0, 0, 0, 0.1);        p {          color: #333333;          margin-bottom: .15rem;          white-space:nowrap;          font-size: .16rem;          &:hover {            color: #15A98D;          }        }        &::before{          position: absolute;          content: '';          width: 0;          height: 0;          border-left: .09rem solid transparent;          border-right: .09rem solid transparent;          border-bottom: .12rem solid #ffffff;          top: -0.11rem;          left: .39rem;        }      }      .click {        transform: rotateY(0deg);        opacity: 1;      }    }    .btn {      cursor: pointer;      &:hover {        i {          color: #15A98D !important;        }      }    }  }  .maskShow {    height: 100vh !important;    opacity: 1 !important;    transition: all .25s;    visibility: visible !important;  }  .mask {    position: fixed;    top: 0;    left: 0;    width: 100vw;    height: 0;    background-image: url("https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/mask-bg.jpg");    background-size: cover;    background-repeat: no-repeat;    opacity: 0;    transition: all .25s;    visibility: hidden;    .back {      position: absolute;      top: 30px;      right: 30px;      cursor: pointer;      transition: all .25s;      &:hover {        transform: rotateZ(180deg);      }    }    .mask-logo {      display: block;      margin: 100px auto;      width: 440px;    }    .mask-wrap {      width: 100%;      display: flex;      justify-content: center;      text-align: center;      .mask-list-box {        color: #333333;        font-size: 20px;        font-weight: bold;        margin: 0 20px;        .mask-list-child {          color: #666666;          font-weight: 500;          font-size: 16px;          margin-top: 30px;          cursor: pointer;          p {            margin-top: 10px;            &:hover {              color: #15A98D;            }          }        }      }    }  }}/*@media screen and (min-width: 1520px) {*//*  .list-box {*//*    .name {*//*      font-size: 0.14rem !important;*//*    }*//*  }*//*}*//*@media screen and (max-width: 1520px) {*//*  .list-box {*//*    .name {*//*      font-size: 0.12rem !important;*//*    }*//*  }*//*}*/</style>