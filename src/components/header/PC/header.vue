<template>  <div class="header-wrap" :class="bgType ? 'whiteBg' : 'transBG'">    <div class="logo" @click="logoClick">      <img :src="bgType ? logo2 : logo1" alt="" />    </div>    <div class="nav-wrap">      <div v-for="(item, index) in headList" :key="index" class="list-box" @click.stop="itemClick(item)">        <span :style="{'color': !bgType ? '#ffffff' : '#333333'}">          <MyIcon :name="item.icon" size="16px"/>          <span style="margin-left: 4px;" class="name" :style="{'border-bottom-color': !bgType ? '#ffffff' : '#333333'}">{{item.name}}</span>        </span>        <div class="list-child" v-if="item.subset.length">          <p v-for="(item2, index2) in item.subset" :key="index2" v-show="!showList.includes(item2.channelCode)" @click.stop="itemClick(item2)">{{item2.name}}</p>        </div>      </div>    </div>    <div class="btn-wrap">      <div class="languageSelection">        <div :style="{'color': !bgType ? '#ffffff' : '#333333'}">{{languageName}}</div>        <el-divider direction="vertical" />        <myIcon size="12px" name="sanjiao" class="sign" :color="bgType ? '#333333' : '#ffffff'" />        <div class="list-child">          <p v-for="(options,id) in language" :key="id" @click.stop="selectClass(options)">{{options.name}}</p>        </div>      </div>      <div class="btn" @click="maskClick">        <MyIcon name="caidan" class="caidan" :color="bgType ? '#333333' : '#ffffff'" size="28px"/>      </div>    </div>    <div class="mask" :class="{maskShow: maskShow}">      <img src="https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/mask-logo.png" alt="" class="mask-logo" />      <div class="mask-wrap">        <div v-for="(item, index) in headList" :key="index" class="mask-list-box" @click.stop="itemClick(item)">          <span>{{item.name}}</span>          <div class="mask-list-child" v-if="item.subset.length">            <p v-for="(item2, index2) in item.subset" :key="index2" v-show="!showList.includes(item2.channelCode)" @click.stop="itemClick(item2)">{{item2.name}}</p>          </div>        </div>      </div>      <MyIcon @click="back" name="guanbi-" class="back" color="#666666" size="30px"/>    </div>  </div></template><script>import { mapState, mapMutations } from 'vuex'import { routeCodeJump } from '@/util/routerConfig'import { channelcrumbs, getNewsList } from '@/service/apiList/common'export default {  name: 'headerCom',  props: {    bgType: {      type: Boolean,      default: true    }  },  inject: ['PCJumpDetails'],  data () {    return {      showList: ['axzc1', 'xcdxm', 'gaxmfxax', 'jdxcp', 'lxwm'],      headList: [],      logo1: 'https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/LOGO.png',      logo2: 'https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/LOGO2.png',      menuBtn1: 'https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/menu-btn.png',      menuBtn2: 'https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/menu-btn2.png',      maskShow: false,      language: [        {          name: '简体中文',          siteCode: 'site757910',        },        {          name: '繁w中文',          siteCode: 'site757910',        },        {          name: 'English',          siteCode: 'site376781',        },        {          name: '日本Z',          siteCode: 'site199825',        },      ],      headListIcon: [        {          channelCode: 'jddt',          icon: '24gf-newspaper4'        },        {          channelCode: 'ykfw',          icon: 'fuwu'        },        {          channelCode: 'kybh',          icon: 'keyanxitong'        },        {          channelCode: 'dwzj',          icon: 'dianshangjiashangcheng'        },        {          channelCode: 'kpjy',          icon: 'jiaoyu'        },        {          channelCode: 'xmwh',          icon: 'wenhuayule'        },        {          channelCode: 'dwhz',          icon: 'hezuoshixin'        },        {          channelCode: 'djgz',          icon: 'dangwugongkai1'        },        {          channelCode: 'xmg',          icon: 'a-ziyuan21'        },        {          channelCode: 'axzc',          icon: 'aixintongdao'        },        {          channelCode: 'gywm',          icon: 'guanyuwo'        },      ],      languageName: '简体中文'    }  },  mounted () {    this.languageName = this.font || '简体中文'    this.channelcrumbs()  },  computed: {    ...mapState({      font: (state) => state.home.font,    }),  },  methods: {    ...mapMutations({      addFont: 'home/addFont',      addBackHome: 'backHome/addBackHome'    }),    logoClick () {      if(this.$route.path === '/pc/home') {        this.addFont('')        sessionStorage.removeItem('fontDefault')        this.$router.go(0)      } else {        this.$router.push('/pc/home')      }    },    maskClick () {      this.maskShow = true    },    selectClass(e) {      this.languageName = e.name      if(location.href.indexOf('details') !== -1 && (sessionStorage.refresh === 'false' || !sessionStorage.refresh) && e.name === '繁w中文') {        this.$router.go(0)      }      localStorage.setItem('siteCode', e.siteCode)      this.addFont(this.languageName)      sessionStorage.refresh = 'false'      routeCodeJump(e)      // if(e.name === 'English' || e.name === '日本Z') {      //   window.location.href = '/'      // }    },    back () {      this.maskShow = false    },    itemClick (item) {      this.back()      this.addBackHome(false)      if (item.url1 && item.url1.includes('?details')) {        const params = this.getQueryString(item.url1)        getNewsList({ channelCode: params.details }).then((res) => {          try {            this.PCJumpDetails(res.datas[0], params.channelCode)          } catch (error) {            this.$message({              message: '敬请期待！',              type: 'warning'            })          }        })        return ''      } else if(item.url1 && !item.url1.includes('?details')) {        this.$router.push(item.url1)      } else {        this.$message({          message: '敬请期待！',          type: 'warning'        })      }    },    getQueryString(url) {      let ItemArr = []      let ItemObj = {}      url        .substring(url.lastIndexOf('?') + 1, url.length)        .split('&')        .map((item) => {          ItemArr.push(item.split('='))        })      ItemArr.map((item) => {        ItemObj[item[0]] = item[1]      })      return ItemObj    },    async channelcrumbs() {      const res = await channelcrumbs({ channelCode: 'xmjdgw' })      if (res.code === 0) {        this.$nextTick(() => {          this.headList = res.data.subset          this.headList.map((item) => {            this.headListIcon.map((item2) => {              if(item.channelCode === item2.channelCode) {                item.icon = item2.icon              }            })          })          this.headList.unshift({            name: '首页',            url1: '/pc/home',            icon: 'shouye-01',            subset: []          })        })      }    },  },  watch: {    font: {      handler(value) {        this.languageName = value      },      immediate: true,      deep: true,    },  }}</script><style lang="scss" scoped>.whiteBg {  box-shadow: 0 0 40px 0 rgba(0, 0, 0, 0.1);  background: #ffffff;  height: 70px;}.transBg {  box-shadow: none;  background: transparent;  height: 110px;}.header-wrap {  width: 100%;  padding: 32px 30px;  color: #ffffff;  display: flex;  align-items: center;  justify-content: space-between;  position: fixed;  top: 0;  z-index: 999;  .logo {    width: 204px;    cursor: pointer;    img {      width: 100%;    }  }  .nav-wrap {    display: inline-flex;    justify-content: space-between;    max-width: 1295px;    min-width: 800px;    width: 66%;    font-size: 16px;    height: 21px;    .list-box {      position: relative;      cursor: pointer;      height: 50px;      .name {        padding-bottom: 3px;      }      .list-child {        /*padding: 25px 60px 10px 25px;*/        background: #ffffff;        position: absolute;        top: 45px;        left: -35px;        transform: rotateY(90deg);        opacity: 0;        visibility: hidden;        transform-origin: 33%;        transition: all 0.25s;        border-radius: 5px;        box-shadow: 0 0 40px 0 rgba(0, 0, 0, 0.1);        p {          padding: 0 60px 15px 25px;          color: #333333;          white-space:nowrap;          font-size: 16px;          &:hover {            color: #15A98D;          }          &:first-child {            padding-top: 25px;          }        }        &::before{          position: absolute;          content: '';          width: 0;          height: 0;          border-left: 9px solid transparent;          border-right: 9px solid transparent;          border-bottom: 12px solid #ffffff;          top: -11px;          left: 39px;        }      }      &:hover {        .list-child {          transform: rotateY(0deg);          opacity: 1;          visibility: visible;        }        .name {          border-bottom: 1px solid;        }      }    }  }  .btn-wrap {    display: flex;    align-items: center;    height: 29px;    .languageSelection {      font-size: 16px;      color: #000;      display: flex;      align-items: center;      margin-right: 40px;      position: relative;      cursor: pointer;      height: 66px;      &:hover {        .list-child {          transform: rotateY(0deg);          opacity: 1;        }        .sign {          transform: rotateZ(180deg);        }      }      .sign {        transition: all 0.25s;      }      .list-child {        padding: 25px 60px 10px 25px;        background: #ffffff;        position: absolute;        top: 62px;        left: -20px;        transform: rotateY(90deg);        opacity: 0;        transform-origin: 33%;        transition: all 0.25s;        border-radius: 5px;        box-shadow: 0 0 40px 0 rgba(0, 0, 0, 0.1);        p {          color: #333333;          margin-bottom: 15px;          white-space:nowrap;          font-size: 16px;          &:hover {            color: #15A98D;          }        }        &::before{          position: absolute;          content: '';          width: 0;          height: 0;          border-left: 9px solid transparent;          border-right: 9px solid transparent;          border-bottom: 12px solid #ffffff;          top: -11px;          left: 39px;        }      }      .click {        transform: rotateY(0deg);        opacity: 1;      }    }    .btn {      cursor: pointer;      &:hover {        i {          color: #15A98D !important;        }      }    }  }  .maskShow {    height: 100vh !important;    opacity: 1 !important;    transition: all .25s;    visibility: visible !important;  }  .mask {    position: fixed;    top: 0;    left: 0;    width: 100vw;    height: 0;    background-image: url("https://file.daqsoft.com/uploadfile/server/geekui/panda/PC/mask-bg.jpg");    background-size: cover;    background-repeat: no-repeat;    opacity: 0;    transition: all .25s;    visibility: hidden;    .back {      position: absolute;      top: 30px;      right: 30px;      cursor: pointer;      transition: all .25s;      &:hover {        transform: rotateZ(180deg);      }    }    .mask-logo {      display: block;      margin: 100px auto;      width: 440px;    }    .mask-wrap {      width: 100%;      display: flex;      justify-content: center;      text-align: center;      .mask-list-box {        color: #333333;        font-size: 20px;        font-weight: bold;        margin: 0 20px;        cursor: pointer;        &:hover {          color: #15A98D;        }        .mask-list-child {          color: #666666;          font-weight: 500;          font-size: 16px;          margin-top: 30px;          cursor: pointer;          p {            margin-top: 10px;            &:hover {              color: #15A98D;            }          }        }      }    }  }}@media screen and (min-width: 1520px) {  .list-box {    i, .name {      font-size: 16px;    }  }}@media screen and (max-width: 1520px) {  .list-box {    i, .name {      font-size: 12px;    }  }}</style>